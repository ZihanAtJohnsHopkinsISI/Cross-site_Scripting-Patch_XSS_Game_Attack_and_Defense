
from flask import Flask, render_template, request, make_response
from urllib.parse import urlparse, urljoin

app = Flask(__name__, template_folder='')


import os

@app.route('/')
@app.route('/<path>')
def main_page(path=""):
    headers = {"X-XSS-Protection": "0"}

    nonce = os.urandom(16).hex()  # Generate a random nonce for CSP

    if "signup" in path:
        response = render_template('signup.html', next=request.args.get('next', ''))
    elif "confirm" in path:
        response = render_template('confirm.html', next=request.args.get('next', 'welcome'), nonce=nonce)
    else:
        response = render_template('welcomeCSP.html')
    
    response = make_response(response)
    return response



if __name__ == '__main__':
    app.run(debug=True, port = 5001)
