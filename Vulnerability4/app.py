from flask import Flask, request, render_template_string, make_response
import os

app = Flask(__name__)

def custom_render_template(filename, context={}):
    with open(os.path.join(os.path.dirname(__file__), filename), 'r') as f:
        content = f.read()
    return render_template_string(content, **context)

@app.route('/', methods=['GET'])
def get():
    # Disable the reflected XSS filter for demonstration purposes
    response_headers = {"X-XSS-Protection": "0"}

    if not request.args.get('timer'):
        # Show main timer page
        content = custom_render_template('index.html')
    else:
        # Show the results page
        try:
            timer = str(int(request.args.get('timer', 0)))
            content = custom_render_template('timer.html', {'timer': timer})
        except ValueError:
            content = custom_render_template('index.html')

    return make_response(content, 200, response_headers)

if __name__ == '__main__':
    app.run(debug=True, port=5001)